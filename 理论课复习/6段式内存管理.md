# 段式内存管理



## 目录

```
基本原理
地址变换
段共享
与页式管理优缺点对比
段页式管理
```



## 索引与重点

页式内存管理问题P3：难以满足动态内存需求，不便于数据共享保护

段式动机P4：方便编程、信息共享（段是信息的逻辑单位，页是物理单位）、信息保护、动态增长、动态链接

### 地址变换

段表P7

地址变换P8：与页表类似，但需要比较段内地址与段长

### 信息共享

P10

可重入代码P11：并发调用可安全运行，不使用全局、静态变量、不能修改代码本身、不能调用其他不可重用代码

### 分段优缺点

优点：易于共享、保护，支持动态需求

缺点：地址变换花费时间空间，要采取紧凑技术，辅存交换困难，尺寸收到主存空间限制

### 分段分页比较

|          | 分页                                   | 分段                             |
| :------- | -------------------------------------- | -------------------------------- |
| 地址空间 | 一维                                   | 二维                             |
| 信息单位 | 物理                                   | 逻辑                             |
| 对于用户 | 透明                                   | 可见                             |
| 大小     | 固定                                   | 不定                             |
| 目的     | 非连续分配，解决碎片                   | 满足用户需要                     |
| 优点     | 解决碎片，提高内存利用率，不必连续存放 | 实现共享保护，动态增长，动态链接 |

### 段页式存储管理

基本思想P14：虚拟分段，物理分页，每个段分成若干页，类似二级页表

实现原理P15：

每个进程一张段表，每个段一张页表。 段表含段号、页表始址和页表长度。页表包含页号和页框号。

X86实例P18

## 小测题

动态链接实现共享库函数优点：减少可执行文件大小、内存大小，便于维护。缺点：运行效率低

共享可重入代码可以减少程序对内存的占用

